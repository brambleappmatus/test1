(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{29552:function(e,r,t){Promise.resolve().then(t.bind(t,3819))},29629:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var s=t(57437);function i(e){let{isOpen:r,title:t,message:i,confirmLabel:o="Delete",cancelLabel:a="Cancel",onConfirm:n,onCancel:d}=e;return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-xl",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:t}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:i})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,s.jsx)("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:a}),(0,s.jsx)("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:o})]})]})})}):null}},3819:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return n}});var s=t(57437),i=t(2265),o=t(49918),a=t(29629);function n(){let[e,r]=(0,i.useState)([]),[t,n]=(0,i.useState)(!0),[d,c]=(0,i.useState)(null),[l,u]=(0,i.useState)(null),[x,h]=(0,i.useState)(!1),[m,g]=(0,i.useState)(null),f=["\uD83D\uDE2B","\uD83D\uDE15","\uD83D\uDE10","\uD83D\uDE42","\uD83E\uDD29"];async function k(){try{let e=await (0,o.s2)();r(e)}catch(e){c(e instanceof Error?e.message:"Failed to fetch workout history")}finally{n(!1)}}(0,i.useEffect)(()=>{k()},[]);let w=async()=>{if(l)try{await (0,o.nZ)(l.id),r(e.filter(e=>e.id!==l.id)),h(!1),u(null)}catch(e){c(e instanceof Error?e.message:"Failed to delete workout")}};return t?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[200px]",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-black dark:border-white"})}):(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"flex justify-between items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Workout History"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Track your fitness journey and progress"})]})}),d&&(0,s.jsx)("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-4",children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error loading history"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:d})]})]})}),0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No workout history"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Start logging your workouts to track your progress."})]}):(0,s.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,s.jsx)("div",{className:"group bg-white dark:bg-black rounded-md shadow-sm hover:shadow-md transition-all duration-300 border border-gray-200 dark:border-gray-800 overflow-hidden cursor-pointer",onClick:()=>g(m===e.id?null:e.id),children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white group-hover:text-black dark:group-hover:text-white transition-colors",children:e.name}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:new Date(e.date).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"text-2xl",title:"Rating: ".concat(e.score,"/5"),children:f[e.score-1]}),(0,s.jsx)("button",{onClick:r=>{r.stopPropagation(),u(e),h(!0)},className:"p-2 rounded-md text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors opacity-0 group-hover:opacity-100",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),m===e.id&&e.workout_exercises&&(0,s.jsx)("div",{className:"mt-6 space-y-3",children:e.workout_exercises.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center py-2 px-4 rounded-md bg-gray-50 dark:bg-gray-900/50 group-hover:bg-white dark:group-hover:bg-black transition-colors",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.exercise.name}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400 tabular-nums",children:[e.sets," \xd7 ",e.reps," @ ",e.weight,"kg"]})]},e.id))})]})},e.id))}),(0,s.jsx)(a.Z,{isOpen:x,title:"Delete Workout",message:'Are you sure you want to delete "'.concat(null==l?void 0:l.name,'"? This action cannot be undone.'),onConfirm:w,onCancel:()=>{h(!1),u(null)}})]})}},49918:function(e,r,t){"use strict";t.d(r,{c6:function(){return a},nZ:function(){return o},s2:function(){return i}});var s=t(88282);async function i(){let{data:e,error:r}=await s.O.from("archived_workouts").select("\n      *,\n      workout_exercises (\n        *,\n        exercise:exercises(*)\n      )\n    ").order("date",{ascending:!1});if(r)throw console.error("Error fetching workout history:",r),Error("Failed to fetch workout history");return e||[]}async function o(e){let{error:r}=await s.O.from("archived_workouts").delete().eq("id",e);if(r)throw console.error("Error deleting archived workout:",r),Error("Failed to delete workout")}async function a(e,r,t){let{data:i,error:o}=await s.O.from("archived_workouts").insert([{workout_template_id:e.id,name:e.name,score:t,date:new Date().toISOString()}]).select().single();if(o)throw console.error("Error archiving workout:",o),Error("Failed to archive workout");let a=r.map(e=>({archived_workout_id:i.id,exercise_id:e.exercise_id,sets:e.sets,reps:e.reps,weight:e.weight})),{error:n}=await s.O.from("workout_exercises").insert(a);if(n)throw console.error("Error saving workout exercises:",n),await s.O.from("archived_workouts").delete().eq("id",i.id),Error("Failed to save workout exercises");return i}},88282:function(e,r,t){"use strict";t.d(r,{O:function(){return i}});var s=t(54566);let i=(0,s.eI)("https://imtezydkgjsusioutche.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltdGV6eWRrZ2pzdXNpb3V0Y2hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzMyOTY4MDcsImV4cCI6MjA0ODg3MjgwN30.89sOaYqjJXHk1KMlXnvZJSsEBoQ_iopj4kfytc2Rm-Y")}},function(e){e.O(0,[382,971,864,744],function(){return e(e.s=29552)}),_N_E=e.O()}]);