(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{37210:function(e,t,r){Promise.resolve().then(r.bind(r,14736))},88282:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});var a=r(54566);let s=(0,a.eI)("https://imtezydkgjsusioutche.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltdGV6eWRrZ2pzdXNpb3V0Y2hlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzMyOTY4MDcsImV4cCI6MjA0ODg3MjgwN30.89sOaYqjJXHk1KMlXnvZJSsEBoQ_iopj4kfytc2Rm-Y")},14736:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(57437),s=r(2265),d=r(42218),l=r.n(d);r(54575);var n=r(47453);function i(e){let{onTimeFrameChange:t}=e,[r,d]=(0,s.useState)({startDate:new Date(Date.now()-6048e5),endDate:new Date}),[i,o]=(0,s.useState)(!1),[c,h]=(0,s.useState)(!1),x=(0,s.useCallback)((e,r)=>{r&&(d(a=>{let s="start"===e?{startDate:r,endDate:a.endDate}:{startDate:a.startDate,endDate:r};return s.endDate<s.startDate&&(s.endDate=s.startDate),t("custom",s.startDate,s.endDate),s}),"start"===e?(o(!1),h(!0)):h(!1))},[t]);return(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white dark:bg-black rounded-md p-1.5 border border-gray-200 dark:border-gray-800 shadow-sm",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(l(),{selected:r.startDate,onChange:e=>x("start",e),selectsStart:!0,startDate:r.startDate,endDate:r.endDate,maxDate:new Date,dateFormat:"MMM d",placeholderText:"Start",open:i,onInputClick:()=>o(!0),onClickOutside:()=>o(!1),className:"w-20 px-2 py-1.5 bg-white dark:bg-black border border-gray-300 dark:border-gray-700 rounded-md text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-black dark:focus:ring-white focus:border-transparent transition-colors cursor-pointer"})}),(0,a.jsx)("span",{className:"text-gray-400",children:"→"}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(l(),{selected:r.endDate,onChange:e=>x("end",e),selectsEnd:!0,startDate:r.startDate,endDate:r.endDate,minDate:r.startDate,maxDate:new Date,dateFormat:"MMM d",placeholderText:"End",open:c,onInputClick:()=>h(!0),onClickOutside:()=>h(!1),className:"w-20 px-2 py-1.5 bg-white dark:bg-black border border-gray-300 dark:border-gray-700 rounded-md text-sm text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-black dark:focus:ring-white focus:border-transparent transition-colors cursor-pointer"})})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"".concat((0,n.default)(r.startDate,"MMM d, yyyy")," - ").concat((0,n.default)(r.endDate,"MMM d, yyyy"))})]})}var o=r(45253),c=r(3952),h=r(16573),x=r(24235),u=r(50039),m=r(86812),g=r(19223),k=r(64403);function b(e){let{data:t}=e,{theme:r}=(0,k.useTheme)(),s="dark"===r?"#34D399":"#059669";return(0,a.jsxs)("div",{className:"bg-white dark:bg-black rounded-md p-6 border border-gray-200 dark:border-gray-800",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Performance Trend"})}),(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(o.h,{width:"100%",height:"100%",children:(0,a.jsxs)(c.w,{data:t,children:[(0,a.jsx)(h.q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),(0,a.jsx)(x.K,{dataKey:"date",tickFormatter:e=>(0,n.default)(new Date(e),"MMM d"),stroke:"#6B7280",fontSize:12}),(0,a.jsx)(u.B,{stroke:"#6B7280",tickFormatter:e=>"".concat(e,"kg"),fontSize:12}),(0,a.jsx)(m.u,{content:e=>{let{active:t,payload:r,label:s}=e;return t&&r&&r.length?(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-sm p-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:(0,n.default)(new Date(s),"PPP")}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Total Weight: ",(0,a.jsxs)("span",{className:"font-medium",children:[r[0].value,"kg"]})]})]}):null}}),(0,a.jsx)(g.x,{type:"monotone",dataKey:"totalWeight",name:"Total Weight",stroke:s,strokeWidth:2,dot:{r:4,fill:s},activeDot:{r:6,fill:s},strokeOpacity:.8})]})})})]})}var f=r(79857);let v=["#059669","#2563EB","#D97706","#DC2626","#7C3AED","#DB2777","#2DD4BF","#F59E0B","#4F46E5","#EC4899"];function j(e){let{data:t,exercises:r}=e,[d,l]=(0,s.useState)([]),[i,b]=(0,s.useState)(!1),{theme:j}=(0,k.useTheme)(),p=e=>{d.includes(e)?l(t=>t.filter(t=>t!==e)):l(t=>[...t,e])},y=e=>v[e%v.length];return(0,a.jsx)("div",{className:"bg-white dark:bg-black rounded-md p-6 border border-gray-200 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Exercise Progress"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>b(!i),className:"px-4 py-2 bg-white dark:bg-black border border-gray-300 dark:border-gray-700 rounded-md hover:border-black dark:hover:border-white focus:outline-none focus:ring-2 focus:ring-black dark:focus:ring-white focus:border-transparent flex items-center justify-between gap-2 min-w-[200px]",children:[(0,a.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:0===d.length?"Select exercises":"".concat(d.length," selected")}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform ".concat(i?"transform rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>b(!1)}),(0,a.jsx)("div",{className:"absolute z-20 mt-2 w-64 bg-white dark:bg-black border border-gray-200 dark:border-gray-800 rounded-md shadow-sm",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("button",{onClick:()=>{d.length===r.length?l([]):l(r.map(e=>e.id))},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-900 rounded-md",children:d.length===r.length?"Deselect All":"Select All"}),(0,a.jsx)("div",{className:"max-h-60 overflow-auto mt-2",children:r.map((e,t)=>(0,a.jsxs)("label",{className:"flex items-center px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-900 cursor-pointer rounded-md",children:[(0,a.jsx)("input",{type:"checkbox",checked:d.includes(e.id),onChange:()=>p(e.id),className:"rounded border-gray-300 text-black focus:ring-black dark:border-gray-700 dark:text-white dark:focus:ring-white"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:e.name}),(0,a.jsx)("div",{className:"ml-2 w-3 h-3 rounded-full",style:{backgroundColor:y(t)}})]},e.id))})]})})]})]})]}),(0,a.jsx)("div",{className:"h-[400px]",children:(0,a.jsx)(o.h,{width:"100%",height:"100%",children:(0,a.jsxs)(c.w,{data:t,children:[(0,a.jsx)(h.q,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),(0,a.jsx)(x.K,{dataKey:"date",tickFormatter:e=>(0,n.default)(new Date(e),"MMM d"),stroke:"#6B7280",fontSize:12}),(0,a.jsx)(u.B,{stroke:"#6B7280",tickFormatter:e=>"".concat(e,"kg"),fontSize:12}),(0,a.jsx)(m.u,{contentStyle:{backgroundColor:"dark"===j?"#1F2937":"#FFFFFF",border:"dark"===j?"1px solid #374151":"1px solid #E5E7EB",borderRadius:"0.375rem",color:"dark"===j?"#F3F4F6":"#111827",padding:"12px"},labelFormatter:e=>(0,n.default)(new Date(e),"PPP")}),(0,a.jsx)(f.D,{}),d.map((e,t)=>{let s=r.find(t=>t.id===e);return s?(0,a.jsx)(g.x,{type:"monotone",dataKey:e,name:s.name,stroke:y(t),strokeWidth:2,dot:{r:4},activeDot:{r:6}},e):null})]})})})]})})}function p(e){let{stats:t}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((e,t)=>(0,a.jsx)("div",{className:"bg-white dark:bg-black rounded-md p-6 border border-gray-200 dark:border-gray-800",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-emerald-50 dark:bg-emerald-900/20 rounded-md",children:(0,a.jsx)(e.icon,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.label}),(0,a.jsx)("p",{className:"mt-1 text-2xl font-semibold text-gray-900 dark:text-white",children:e.value}),void 0!==e.change&&(0,a.jsxs)("p",{className:"mt-1 text-sm ".concat(e.change>=0?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"),children:[e.change>=0?"+":"",e.change,"%"]})]})]})},t))})}function y(e){let{activities:t}=e;return 0===t.length?(0,a.jsx)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"No recent activity"}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-4 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900/50 transition-colors",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/20 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:e.score?"\uD83D\uDCAA":"\uD83C\uDFCB️"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:(0,n.default)(new Date(e.date),"EEEE, MMM d, h:mm a")})]}),e.score&&(0,a.jsx)("div",{className:"flex-shrink-0 text-lg",title:"Rating: ".concat(e.score,"/5"),children:["\uD83D\uDE2B","\uD83D\uDE15","\uD83D\uDE10","\uD83D\uDE42","\uD83E\uDD29"][e.score-1]})]},e.id))})}var D=r(88282);async function w(e,t,r){let a=t.toISOString(),s=r.toISOString(),{data:d,error:l}=await D.O.from("exercises").select("*").order("name");if(l)throw Error("Failed to fetch exercises");let{data:n,error:i}=await D.O.from("archived_workouts").select("\n      *,\n      workout_exercises (\n        *,\n        exercise:exercises(*)\n      )\n    ").gte("date",a).lte("date",s).order("date",{ascending:!0});if(i)throw Error("Failed to fetch workout data");let o=(null==n?void 0:n.length)||0,c=(null==n?void 0:n.reduce((e,t)=>e+t.workout_exercises.reduce((e,t)=>e+t.weight*t.sets*t.reps,0),0))||0,h=(null==n?void 0:n.reduce((e,t)=>e+(t.score||0),0))/o||0,x=(null==n?void 0:n.map(e=>({date:e.date,totalWeight:e.workout_exercises.reduce((e,t)=>e+t.weight*t.sets*t.reps,0)})))||[],u=(null==n?void 0:n.reduce((e,t)=>{let r=t.date,a={};t.workout_exercises.forEach(e=>{e.exercise&&(a[e.exercise.id]=e.weight)});let s=e.find(e=>e.date===r);return s?Object.assign(s,a):e.push({date:r,...a}),e},[]))||[],m=(null==n?void 0:n.slice(0,5).map(e=>({id:e.id,name:e.name,date:e.date,score:e.score})))||[];return{totalWorkouts:o,totalWeight:Math.round(c),avgScore:Math.round(10*h)/10,performanceData:x,exerciseProgressData:u,exercises:d,recentActivity:m}}function N(){var e;let{dateRange:t,updateDateRange:r}=function(e){let[t,r]=(0,s.useState)({startDate:(null==e?void 0:e.startDate)||new Date(Date.now()-6048e5),endDate:(null==e?void 0:e.endDate)||new Date}),a=(0,s.useCallback)(e=>{r(t=>({...t,...e,endDate:e.endDate&&e.endDate<t.startDate?t.startDate:e.endDate||t.endDate}))},[]);return{dateRange:t,updateDateRange:a}}(),[d,l]=(0,s.useState)(!0),[n,o]=(0,s.useState)(null),[c,h]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){try{l(!0);let e=await w("custom",t.startDate,t.endDate);h(e),o(null)}catch(e){o(e instanceof Error?e.message:"Failed to load dashboard data")}finally{l(!1)}}()},[t]);let x=[{label:"Total Workouts",value:(null==c?void 0:c.totalWorkouts)||0,change:null==c?void 0:c.workoutChange,icon:e=>{let{className:t}=e;return(0,a.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}},{label:"Total Weight",value:"".concat((null==c?void 0:c.totalWeight)||0,"kg"),change:null==c?void 0:c.weightChange,icon:e=>{let{className:t}=e;return(0,a.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h2m10 0h2M8 8h6M4 12h14M4 16h2m10 0h2M8 16h6"})})}},{label:"Avg. Score",value:(null==c?void 0:null===(e=c.avgScore)||void 0===e?void 0:e.toFixed(1))||"0.0",change:null==c?void 0:c.scoreChange,icon:e=>{let{className:t}=e;return(0,a.jsx)("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}}];return d?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-black dark:border-white"})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Track your fitness progress and achievements"})]}),(0,a.jsx)(i,{onTimeFrameChange:()=>{}})]}),n?(0,a.jsx)("div",{className:"rounded-md bg-red-50 dark:bg-red-900/20 p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Error loading dashboard"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-red-700 dark:text-red-300",children:n})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p,{stats:x}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(b,{data:(null==c?void 0:c.performanceData)||[]})}),(0,a.jsxs)("div",{className:"bg-white dark:bg-black rounded-md p-6 border border-gray-200 dark:border-gray-800",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Activity"}),(0,a.jsx)(y,{activities:(null==c?void 0:c.recentActivity)||[]})]})]}),(0,a.jsx)(j,{data:(null==c?void 0:c.exerciseProgressData)||[],exercises:(null==c?void 0:c.exercises)||[]})]})]})}},64403:function(e,t,r){"use strict";r.r(t),r.d(t,{ThemeProvider:function(){return l},useTheme:function(){return n}});var a=r(57437),s=r(2265);let d=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)("light");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&(l(e),document.documentElement.classList.toggle("dark","dark"===e))},[]),(0,a.jsx)(d.Provider,{value:{theme:r,toggleTheme:()=>{let e="light"===r?"dark":"light";l(e),localStorage.setItem("theme",e),document.documentElement.classList.toggle("dark")}},children:t})}function n(){let e=(0,s.useContext)(d);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}}},function(e){e.O(0,[382,655,971,864,744],function(){return e(e.s=37210)}),_N_E=e.O()}]);